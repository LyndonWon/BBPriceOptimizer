<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>BBC</title>

    <!-- Bootstrap Core CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../stylesheets/style.css">

    <!-- Custom CSS -->
    <style>
    body {
        padding-top: 70px;
        /* Required padding for .navbar-fixed-top. Remove if using .navbar-static-top. Change if height of navigation changes. */
    }
    </style>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
    <div class="header-cont">
    <h2 style="color: white" align = "center"><a href = "/search" style = "color: white">BBPriceOptimizer</a></p>
    </div>

    <div class = "container-fluid">
    <!-- Search box -->


    <form action="/search" style = "margin-bottom : 50px;">
        <input type="text" class="form-control" placeholder="Search" name="query">
    </form>



    <!-- clicked product -->

    <h4><%= title %></h4>

    <ul style="list-style: none;">
      <li class = "center"> <img src=<%= image %> height="200" width="200">
        <span class = "asdf"><%= " $" + bbPrice %>
        </span>
        <% if (!isNaN(azPrice)) { %>
          <p> The Difference between Amazon Price and Best Buy Price $<%= pricePoints[3] %> </p>
        <% } %>
        <p>Amazon Price: <%= !isNaN(azPrice) ? "$" + azPrice : 'Not on Amazon' %></p>
        <% if (!isNaN(azPrice)) { %>
          <p>Price point 1 : $<%= pricePoints[0] %></p>
          <p>Price point 2 : $<%= pricePoints[1] %></p>
          <p>Price point 3 : $<%= pricePoints[2] %></p>
        <% } %>
      </li>
    </ul>

    <select>
      <option value="" disabled selected></option>
      <option id="city_1"></option>
      <option id="city_2"></option>
    </select>

    <canvas id="myChart" width="400" height="400"></canvas>

    <!-- jQuery Version 1.11.1 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

</div>
<script>
jQuery.noConflict();
(function($) {
  $(function() {
    $.getJSON('/data/cityData.json', function(json) {
      var city_1 = json.cityData[0];
      var city_2 = json.cityData[1];
      console.log(json.cityData[0]);
      $('#city_1').val(city_1.cityName);
      $('#city_1').text(city_1.cityName);
      $('#city_2').val(city_2.cityName);
      $('#city_2').text(city_2.cityName);

      var ctx = $("#myChart");
      var chart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ["Red", "Blue", "Yellow", "Green", "Purple", "Orange"],
          datasets: [{
            label: '# of Votes',
            data: [12, 19, 3, 5, 2, 3],
            backgroundColor: [
              'rgba(255, 99, 132, 0.2)',
              'rgba(54, 162, 235, 0.2)',
              'rgba(255, 206, 86, 0.2)',
              'rgba(75, 192, 192, 0.2)',
              'rgba(153, 102, 255, 0.2)',
              'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
              'rgba(255,99,132,1)',
              'rgba(54, 162, 235, 1)',
              'rgba(255, 206, 86, 1)',
              'rgba(75, 192, 192, 1)',
              'rgba(153, 102, 255, 1)',
              'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
          }]
        },
        options: {
          scales: {
            yAxes: [{
              ticks: {
                beginAtZero:true
              }
            }]
          }
        }
      });
    });
  });
})(jQuery);
</script>

</body>

</html>
